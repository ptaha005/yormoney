define(["knockout","jquery","text!./../templates/BankAccounts.html","core","vent","ko.dataTable"],function(e,t,n,r,i){var s=r.Model.extend({url:"/api/bankaccount",autoUpdate:!0,fields:{id:{},member:{"default":{id:undefined}},bank:{"default":{id:undefined}},accountType:{"default":{id:undefined}},balance:{"default":0,validation:{pattern:/^\d{1,9}$/}},purpose:{}}});return function(t){var r=this;r.oTable=oTable=e.observable(),r.banks=e.observableArray(t.banks),r.accountTypes=e.observableArray(t.accounttypes),r.members=e.observableArray(t["user.members"]),s.on("delete create",function(){oTable().fnReloadAjax(),i.trigger("update_total")}).on("update",function(){i.trigger("update_total")}),r.onRemove=function(){s.off("delete create update")},r.add=function(){(new s({member:r.members()[0]})).save()},r.delete=function(e){e.delete()},r.columns=[{sTitle:"Bank name",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Account type",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Purpose",sWidth:"10%",mDataProp:"purpose",bSortable:!1},{sTitle:"Account holder",sWidth:"20%",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Balance",sWidth:"20%",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"&nbsp;",mData:function(e,t,n){return null},bSortable:!1}],r.buildRow=function(e){return new s(e)},r.template=n}})