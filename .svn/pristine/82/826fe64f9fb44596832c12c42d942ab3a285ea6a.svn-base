define(["knockout","jquery","text!./../templates/Insurance.html","vent","../../widgets/start","core"],function(e,t,n,r,i,s){var o=s.Model.extend({url:"/insurance",fields:{id:{},startDate:{},endDate:{},cover:{validation:{pattern:{params:/^\d{1,9}$/,message:"please use numeber ammount"}}},paymentDate:{},policyNumber:{validation:{pattern:/^\d{1,9}$/}},purpose:{},paymentAmount:{},lifeAssuarence:{validation:{pattern:/^[a-zA-Z]*$/}},bankAccount:{"default":{id:undefined}},frequency:{},insuranceCompany:{"default":{id:undefined}}}});return function(t){var r=this;t=t||{};var u=t.insurance||{};r.insurance=new o(u),r.save=function(){r.insurance.save(function(e){e.jsonValues.success||alert(e.jsonValues.message)})},r.insuranceCompanies=e.observableArray(t.provider||[]),r.frequencyList=e.observableArray(t.frequency||[]),r.bankAccounts=e.utils.arrayMap(t.bankaccount,function(e){return{id:e.id,name:(e.bank?e.bank.name:"-")+" "+(e.accountType?e.accountType.name:"-")}}),r.notes=e.observable(new i.Notes(u.notes)),r.saveNotes=e.computed(function(){var e=r.notes().getNotes();r.saveNotes&&s.ajax_post("/insurance/notes",e)}),r.template=n}})