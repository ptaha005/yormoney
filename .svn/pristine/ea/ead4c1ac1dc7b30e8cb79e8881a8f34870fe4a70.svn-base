define(["knockout","jquery","jquery-ui"],function(e,t){e.bindingHandlers.datepicker={init:function(n,r,i){var s=i().datepickerOptions||{dateFormat:"yy-mm-dd",buttonImage:"/pages/img/date.png",buttonImageOnly:!0,showOn:"button"};t(n).datepicker(s),t(n).change(function(){var e=t(n).datepicker("getDate"),i=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();t(n).val(i);var s=r();s(e),t(n).blur()}),e.utils.domNodeDisposal.addDisposeCallback(n,function(){t(n).datepicker("destroy")})},update:function(n,r){var i=e.utils.unwrapObservable(r());String(i).indexOf("/Date(")==0&&(i=new Date(parseInt(i.replace(/\/Date\((.*?)\)\//gi,"$1"))));var s=t(n).datepicker("getDate");i-s!==0&&t(n).datepicker("setDate",i)}}})