define(["knockout","jquery","text!./../templates/Calendar.html","vent","fullcalendar"],function(e,t,n,r){return function(){var e=this;e.afterRender=function(){var e={},n={event:{img:"/pages/img/ico_prize.png",cssClass:"event"},task:{img:"/pages/img/ico_dialog.png",cssClass:"task"},transaction:{img:"/pages/img/ico_funt.png",cssClass:"transaction"},summary:{img:"/pages/img/ico_graf.png",cssClass:"summary"}};t("#calendar").fullCalendar({header:{left:"prev,title,next",center:"month, agendaWeek, agendaDay",right:""},editable:!1,events:"/calendar/event",eventDrop:function(e,t){alert(e.title+" was moved "+t+" days\n"+"(should probably update your database)")},eventAfterRender:function(r,i){var s=i.closest("div"),o=r.start.toString()+"_"+r.type;e[o]?i.remove():e[o]=0,e[o]++;var u=n[r.type],a=t("<small>").text(e[o]),f=t("<img>").prop("src",u.img);i.empty().addClass(u.cssClass).append(f).append(a)},eventAfterAllRender:function(){e={}},eventClick:function(e,t,n){return e.type=="task"&&(document.location="#/tasks"),!1},loading:function(e){e?t("#loading").show():t("#loading").hide()}});var i='<ul class="menu_supplier" ><li style="margin : 0"><a href="#/calendar" class="butt edit calc"><img class="middle" src="/pages/img/icalc.png"> iCal</a></li><li><a href="#/calendar"><img src="/pages/img/suppl_hat.png"></a></li><li><a href="#/calendar"><img src="/pages/img/suppl_print.png"></a></li><li><a href="#/calendar"><img src="/pages/img/suppl_conv.png"></a></li><li><a href="#/calendar"><img src="/pages/img/suppl_cancel.png"></a></li><li><a href="#/calendar"><img src="/pages/img/suppl_message.png"></a></li><li><a class="video" href="#/calendar"><img src="/pages/img/suppl_kino.png"></a></li></ul>';t(".fc-header-right").append(i),t("a.video").click(function(){return r.trigger("showHowToVidio","income"),!1})},e.template=n}})