define(["knockout","jquery","text!./../templates/Forgot.html","core"],function(e,t,n,r){return function(i){var s=this,o=i.what=="username";s.email=e.observable(""),s.error=e.observable(""),s.buttonText=o?"remind username":"get new password",s.successText=e.observable(""),s.error=e.observable(""),s.onRemove=function(){t("body").removeClass("nobackground")},s.afterRender=function(){t("body").addClass("nobackground")},s.nothing=function(){return!1},s.send=function(){o?r.ajax_post("/api/user/forgot/username",{email:s.email()},function(e){e.success?s.successText(e.message):s.error(e.message)}):r.ajax_post("/api/user/forgot/password",{email:s.email()},function(e){e.success?s.successText(e.message):s.error(e.message)})},s.template=n}})