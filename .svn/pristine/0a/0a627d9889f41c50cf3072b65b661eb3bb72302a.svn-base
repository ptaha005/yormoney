define(["knockout","jquery","text!./../templates/Expenditure.html","core","vent","dataTable"],function(e,t,n,r,i){var s=r.Model.extend({url:"/api/expenditure",autoUpdate:!0,fields:{id:{},expenditureType:{"default":{id:undefined}},companyName:{},member:{"default":{id:undefined}},frequency:{"default":undefined},bankAccount:{"default":{id:undefined}},active:{"default":!1},paidFromAC:{},cost:{"default":0,validation:{pattern:/^\d{1,9}$/}}}});return function(r){var o=this;o.oTable=oTable=e.observable(),o.showCategories=function(){i.trigger("showCategories")},o.selectedCategory=e.observable(null),o.categories=e.observableArray(r.categories),o.expenditureTypeId=e.observable(),o.expenditureTypes=e.observableArray([]),o.bankAccounts=e.utils.arrayMap(r.bankaccount,function(e){return{id:e.id,name:(e.bank?e.bank.name:"-")+" "+(e.accountType?e.accountType.name:"-")}}),o.selectedCategory.subscribe(function(){return o.selectedCategory()?o.expenditureTypes(o.selectedCategory().expenditureTypes):o.expenditureTypes([])}),o.allExpenditureTypes=e.observableArray(r.expendituretypes),t.get("/api/expenditure/expendituretypes",o.allExpenditureTypes),o.frequencyList=e.observableArray(r.frequency),o.daysList=e.observableArray(r.day),o.members=e.observableArray(r.members),s.on("delete create",function(){oTable().fnReloadAjax(),i.trigger("update_total")}).on("update",function(){i.trigger("update_total")}),o.onRemove=function(){s.off("delete create update")},o.add=function(){(new s({member:o.members()[0]})).save()},o.delete=function(e){e.delete()},o.columns=[{sTitle:"Do you have this cost?",sWidth:"10%",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Expenditure type",sWidth:"10%",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Company name",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Whose cost?",sClass:"butons-action",oDefault:"",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Frequency",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Cost",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Paid from A/C",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Additional questions",mDataProp:"question",sWidth:"10%",oDefault:"",bSortable:!1},{sTitle:"&nbsp;",mDataProp:"question",bSortable:!1}],o.buildRow=function(e){return new s(e)},o.template=n}})