define(["knockout","jquery","text!./../templates/Income.html","core","vent","ko.dataTable"],function(e,t,n,r,i){var s=r.Model.extend({url:"/api/income",autoUpdate:!0,fields:{id:{},active:{},incomeType:{"default":{id:undefined}},member:{"default":{id:undefined}},frequency:{},question:{"default":"N/A"},bankAccount:{"default":{id:undefined}},incomeSource:{},amount:{"default":0,validation:{pattern:/^\d{1,9}$/}}}});return function(t){var r=this;r.incomeTypeId=e.observable(),r.incomeTypes=e.observableArray(t.incometypes),r.frequencyList=e.observableArray(t.frequency),r.daysList=e.observableArray(t.day),r.members=e.observableArray(t.members||[]);var o=e.utils.arrayFilter(t.bankaccount,function(e){return e.bank!=null&&e.accountType!=null});r.bankAccounts=e.utils.arrayMap(o,function(e){return{id:e.id,name:e.bank.name+" "+e.accountType.name}}),s.on("delete create",function(){oTable().fnReloadAjax(),i.trigger("update_total")}).on("update",function(){i.trigger("update_total")}),r.onRemove=function(){s.off("delete create update")},r.add=function(){(new s({member:r.members()[0]})).save()},r.oTable=oTable=e.observable(),r.delete=function(e){e.delete()},r.columns=[{sTitle:"Do you have this cost?",sWidth:"10%",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"income type",sWidth:"10%",sClass:"butons-action",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Income source",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Whose Income?",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Frequency",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Amount",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Paid to A/C",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"Additional questions",mData:function(e,t,n){return null},bSortable:!1},{sTitle:"&nbsp;",mData:function(e,t,n){return null},bSortable:!1}],r.buildRow=function(e){return new s(e)},r.template=n}})