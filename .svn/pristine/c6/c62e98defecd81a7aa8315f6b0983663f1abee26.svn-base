define(["jquery","knockout","vent","./viewModels/Register1","./viewModels/Results","./viewModels/Login","./viewModels/CategoriesPopup","./viewModels/Layouts/GridLayout","./viewModels/Layouts/Layout","./viewModels/Guides","./viewModels/HowToVidio","./viewModels/Forgot","./viewModels/TermsAndConditions","./viewModels/DemoPage","core"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=t.region(),m=t.region(),g=!1;n.on("error",function(){window.location="#/login"}),n.on("next",function(e,t){t=="login"&&(window.location="#/registration1"),t=="register1"&&(window.location="#/welcome"),t=="welcome"&&(window.location="#/registration2"),t=="register2"&&(window.location="#/bankaccounts"),t=="bankaccounts"&&(window.location="#/income"),t=="income"&&(window.location="#/expenditure"),t=="expenditure"&&(window.location="#/events"),t=="events"&&(window.location="#/summary"),t=="summary"&&(window.location="#/complete"),t=="complite"&&(window.location="#/home"),t=="tasks"&&(window.location="#/home")}),n.on("update_state",function(t,r){e.get("/user/state/"+r,function(){n.trigger("next",r)}).done(function(){}).fail(function(){n.trigger("next",r)})}),n.on("showTerms",function(){m.render(h)}),n.on("showGuides",function(e,t){m.render(f,"/api/page/manual/"+t)}),n.on("showHowToVidio",function(e,t){m.render(l,"/api/page/video/"+t)}),n.on("showCategories",function(){m.render(o,"/api/expenditure/total")});var y=function(e){v.render(c,{what:e})},b=function(){v.render(r)},w=function(){v.render(i)},E=function(){v.render(p)},S=function(){v.render(s)},x=function(t){return function(n){var r=this;g||t.indexOf(this.path)!=-1?n():e.getJSON("/user/session",function(e){e.jsonValues.login?(g=e,n()):(g=!1,r.redirect("#/login"))})}},T=function(){g?n.trigger("next",g.describeState):S()};return n.on("logout",function(){e.get("/api/user/logout",function(){g=!1,window.location="#/login"})}),{content:v,popup:m,showRegistration:b,showResult:w,showLogin:S,showForgot:y,current_user:g,showDemoPage:E,checke_autorizetion:x,redirect_to_user_state:T,GridLayout:u,Layout:a}})