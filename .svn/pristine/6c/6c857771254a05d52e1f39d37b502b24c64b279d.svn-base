define(["knockout","jquery","text!./../templates/Events.html","core","vent"],function(e,t,n,r,i){var s=r.Model.extend({url:"/api/event",autoUpdate:!0,fields:{id:{},active:{},agreedSpend:{validation:{pattern:/^\d{1,9}$/}},eventExpenditureType:{},date:{}}});return function(r){var o=this,u=r.path;o.name=e.observable(u.length==0?"Expenditure Item":u[u.length-1]);var a=["Events"];for(var f=0;f<u.length;f++)a.push(u[f]);o.title=a.join(" - "),o.items=e.utils.arrayMap(r.events,function(e){return new s(e)}),o.showList=function(){i.trigger("showCategories")},o.expenditureTypeList=e.observableArray(e.utils.arrayMap(r.expenditureType,function(e){return{id:e.eventExpenditureType.id,name:e.eventExpenditureType.name}})),o.expenditureType=e.observable(r.type),o.expenditureType.subscribe(function(e){e&&(document.location="#/events/"+e)}),o.afterRender=function(){t(".income_page").addClass("expend_page")},o.template=n}})